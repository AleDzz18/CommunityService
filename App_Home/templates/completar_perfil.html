{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
<div class="perfil-container-wrapper"> 
    <div class="perfil-container"> 
        <h1>Completar Datos de Perfil</h1>
        <p>Casi terminas el registro, **{{ usuario.username }}**. Por favor, proporciona tus datos completos.</p>
        
        <form method="POST">
            {% csrf_token %}
            
            <h2>Información Personal</h2>
            
            <div class="form-row"> 
                <div class="form-group">
                    {{ formulario.first_name.label_tag }}
                    {{ formulario.first_name }}
                    {{ formulario.first_name.errors }}
                </div>
                <div class="form-group">
                    {{ formulario.last_name.label_tag }}
                    {{ formulario.last_name }}
                    {{ formulario.last_name.errors }}
                </div>
            </div>

            <div class="form-group">
                {{ formulario.cedula.label_tag }}
                {{ formulario.cedula }}
                {{ formulario.cedula.errors }}
            </div>

            <h2>Asignación de Rol</h2>
            <div class="form-group">
                {{ formulario.rol.label_tag }}
                {{ formulario.rol }}
                {{ formulario.rol.errors }}
            </div>
            <div class="form-group">
                {{ formulario.tower.label_tag }}
                {{ formulario.tower }}
                {{ formulario.tower.errors }}
            </div>

            <h2>Optar por Roles Secundarios (Opcional)</h2>
            <p class="text-muted">Marca si deseas colaborar con roles de gestión específicos.</p>
            <div class="checkbox-group">
                <div class="form-check">
                    {{ formulario.es_admin_basura }} {{ formulario.es_admin_basura.label_tag }}
                </div>
                <div class="form-check">
                    {{ formulario.es_admin_clap }} {{ formulario.es_admin_clap.label_tag }}
                </div>
                <div class="form-check">
                    {{ formulario.es_admin_bombonas }} {{ formulario.es_admin_bombonas.label_tag }}
                </div>
            </div>

            <button type="submit" class="btn mt-4">Guardar y Acceder</button>

            <a href="{% url 'url_cancelar_registro' user_id=usuario.id %}" 
                class="btn btn-danger-outline"
                style="flex: 1; text-align: center; text-decoration: none; background-color: transparent; border: 2px solid var(--md-sys-color-error); color: var(--md-sys-color-error);"
                onclick="return confirm('¿Estás seguro de cancelar el registro? Tu cuenta creada será eliminada permanentemente.');">
                Cancelar
            </a>
        </form>
    </div>
</div>
{% endblock content %}